## Sparrow Redis Message Broker

专为 Minecraft 集群通信打造的高性能消息库。

### 设计思路

在 Minecraft 服务器集群这种特定场景下，传统消息方案往往存在不必要的性能损耗。我们的设计重点很明确：在保证功能完整的前提下，把性能开销压到最低。

- 适配 Redis 单线程模型 - 避免线程竞争，减少上下文切换
- 定制序列化机制 - 直接操作字节数据，极致序列化性能

### 关于序列化性能
在真实运行的 Minecraft 环境中，直接处理字节数据带来的性能提升是实实在在的。相比传统的 Java 序列化、JSON、Kryo 甚至 Protobuf 这些通用方案，定制化处理速度能快出一个数量级。考虑到大多数服主使用的要么是单台物理机，要么就是简单内网环境，通常不会为消息通信专门配置高性能服务。在这种条件下，CPU 资源能省则省，每一分算力都要用在刀刃上。

### 为什么选择 Redis 而不是 Kafka/RocketMQ
这个选择基于我对 Minecraft 集群实际需求的判断：
1. 需要处理**实时性要求极高**的通知和触发
2. 大部分是**轻量级、非核心**的业务消息
3. 消息量相对较小，没有长期堆积的需求
4. 通常不需要消息重放或回溯功能
5. 不涉及复杂的大数据分析场景

在当前行业实践中，对于“企业级”系统能力的界定，有时可能较为侧重于高吞吐量等技术指标。例如，部分系统设计会倾向于构建能够承载百万级别消息的队列服务，这在特定高并发场景下确有必要，但也往往伴随着较高的资源开销，例如需投入整台服务器以保障其稳定运行。

相较之下，在一些实际业务环境中，采用更为轻量的技术方案（例如 Redis）也可实现单线程下至少三万量级的消息处理能力，同时资源占用大幅减少。从资源利用效率与成本效益的角度来看，这类轻量化方案在“能效比”方面具备一定优势，更适用于对资源敏感或架构追求简洁的场景。

通过部署多个 Redis 实例，并将不同类型的消息分发至不同实例处理，该架构具备良好的横向扩展潜力，能够进一步提升系统承载能力。以 Minecraft 这类应用为例，三万并发已属于相当高的负载规模，足以满足多数实际业务需求。